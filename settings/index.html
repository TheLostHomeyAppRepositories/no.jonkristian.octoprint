<!doctype html>
<html>

<head>
    <script type="text/javascript" src="/homey.js" data-origin="settings"></script>
</head>

<body>

    <h1 data-i18n="settings.title"></h1>

    <fieldset>
        <legend data-i18n="settings.title"></legend>
        <div class="field row">
            <label data-i18n="settings.pollInterval"></label>
            <input id="pollInterval" type="text">
            <p><small><i data-i18n="settings.pollIntervalDescription"></i></small></p>
        </div>
    </fieldset>

    <button id="save" class="right" data-i18n="settings.save"></button>

    <script type="text/javascript">

        function onHomeyReady(Homey) {

            Homey.ready();

            let polling = document.getElementById('pollInterval');
            let saveElement = document.getElementById('save');

            Homey.get('pollInterval', function (err, value) {
                if (err) return Homey.alert(err);
                pollInterval.value = value;
            });

            saveElement.addEventListener('click', function () {
                Homey.set('pollInterval', pollInterval.value, function (err) {
                    if (err) return Homey.alert(err);
                });

                Homey.alert(__('settings.success'));
            });
        }


    </script>

</body>

</html>